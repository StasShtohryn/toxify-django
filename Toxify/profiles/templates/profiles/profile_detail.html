{% extends 'main/base.html' %}

{% block title %} Профіль {% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
  <div class="p-6 border-b border-white/10">
    <div class="flex justify-between items-start mb-6">
      <div>
        <h2 class="text-2xl font-bold tracking-tight mb-1">{{profile.user.username}}</h2>
          <div class="flex items-center gap-2 mb-4">
            <span class="text-sm text-white/60">@{{profile.user.username}}</span>
            <span class="px-2 py-0.5 bg-white/5 text-[10px] text-white/40 border border-white/10">tag</span>
          </div>
        </div>
        <div class="w-20 h-20 border border-white/20 bg-white/5 shrink-0">
          <img
            src="{{profile.avatar.url}}"
            alt="profile pic"
            class="w-full h-full object-cover"
            referrerpolicy="no-referrer"
          />
        </div>
      </div>

      <p class="text-sm text-white/80 mb-6 leading-relaxed">
        {% if profile.bio %}{{profile.bio}}{% else %}no bio yet.{% endif %}
      </p>

      <div class="flex justify-between items-center">
        <div class="text-xs text-white/40 hover:text-white cursor-pointer transition-colors">
          3 FOLLOWERS
        </div>
        <div class="flex gap-2">
          {% if is_owner %}
            <a href="{% if not user.is_authenticated %}{% url 'login' %}{% else %}javascript:void(0){% endif %}" id="openCreatePostModal" class="px-4 py-2 border border-white/20 text-xs font-bold hover:bg-white/5 transition-colors cursor-pointer">
              CREATE POST
            </a>
            <a href="{% url 'profile_edit' %}" class="px-4 py-2 border border-white/20 text-xs font-bold hover:bg-white/5 transition-colors cursor-pointer">
              EDIT PROFILE
            </a>
            <form action="{% url 'logout' %}" method="post" style="display: inline;">
              {% csrf_token %}
              <button type="submit" class="px-4 py-2 border border-white/20 text-xs font-bold hover:bg-white/5 transition-colors cursor-pointer">
                EXIT
              </button>
            </form>
          {% else %}
            <a href="#" class="px-4 py-2 border border-white/20 text-xs font-bold hover:bg-white/5 transition-colors cursor-pointer">
              FOLLOW
            </a>
          {% endif %}
        </div>
      </div>
    </div>


    <div class="flex border-b border-white/10">
      <button class="flex-1 py-4 text-xs font-bold relative group">
        <span class="opacity-40 group-hover:opacity-100 transition-opacity">POSTS</span>
        <div class="absolute bottom-0 left-0 right-0 h-0.5 bg-white"></div>
      </button>
      <button class="flex-1 py-4 text-xs font-bold relative group">
        <span class="opacity-40 group-hover:opacity-100 transition-opacity">REPLIES</span>
      </button>
      <button class="flex-1 py-4 text-xs font-bold relative group">
        <span class="opacity-40 group-hover:opacity-100 transition-opacity">REPOSTS</span>
      </button>
    </div>

    <div class="divide-y divide-white/10">
      {% if not profile.posts.exists %}
        <h2 class="text-center uppercase mt-2">no posts</h2>

      {% else %}
        {% for post in profile.posts.all%}
          {% include 'posts/base_post.html' with post=post %}
        {% endfor %}
      {% endif %}
    </div>
</div>







{% endblock %}